I"Œ<h2 id="learning-objectives">Learning objectives</h2>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">source</span><span class="p">(</span><span class="s2">"code/baxter.R"</span><span class="p">)</span><span class="w">

</span><span class="n">alpha</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_tsv</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s2">"raw_data/baxter.groups.ave-std.summary"</span><span class="p">,</span><span class="w">
		</span><span class="n">col_types</span><span class="o">=</span><span class="n">cols</span><span class="p">(</span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">col_character</span><span class="p">()))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
	</span><span class="n">filter</span><span class="p">(</span><span class="n">method</span><span class="o">==</span><span class="s1">'ave'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
	</span><span class="n">select</span><span class="p">(</span><span class="n">group</span><span class="p">,</span><span class="w"> </span><span class="n">sobs</span><span class="p">,</span><span class="w"> </span><span class="n">shannon</span><span class="p">,</span><span class="w"> </span><span class="n">invsimpson</span><span class="p">,</span><span class="w"> </span><span class="n">coverage</span><span class="p">)</span><span class="w">
</span><span class="n">metadata</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">get_metadata</span><span class="p">()</span><span class="w">
</span><span class="n">meta_alpha</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">inner_join</span><span class="p">(</span><span class="n">metadata</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s1">'sample'</span><span class="o">=</span><span class="s1">'group'</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>meta_alpha %&gt;% pivot_longer(c(shannon, invsimpson, sobs, coverage), names_to=â€metricâ€, values_to=â€valueâ€) %&gt;% ggplot(aes(x=diagnosis, y=value)) + geom_boxplot() + facet_grid(.~metric)</p>

<p>meta_alpha %&gt;% pivot_longer(c(shannon, invsimpson, sobs, coverage), names_to=â€metricâ€, values_to=â€valueâ€) %&gt;% ggplot(aes(x=diagnosis, y=value)) + geom_boxplot() + facet_grid(metric~.)</p>

<p>meta_alpha %&gt;% pivot_longer(c(shannon, invsimpson, sobs, coverage), names_to=â€metricâ€, values_to=â€valueâ€) %&gt;% ggplot(aes(x=diagnosis, y=value)) + geom_boxplot() + facet_grid(sex~metric)</p>

<p>meta_alpha %&gt;% pivot_longer(c(shannon, invsimpson, sobs, coverage), names_to=â€metricâ€, values_to=â€valueâ€) %&gt;% ggplot(aes(x=diagnosis, y=value)) + geom_boxplot() + facet_wrap(~metric)</p>

<p>meta_alpha %&gt;% pivot_longer(c(shannon, invsimpson, sobs, coverage), names_to=â€metricâ€, values_to=â€valueâ€) %&gt;% ggplot(aes(x=diagnosis, y=value)) + geom_boxplot() + facet_wrap(~metric, scales=â€freeâ€)</p>

<p>meta_alpha %&gt;% pivot_longer(c(shannon, invsimpson, sobs, coverage), names_to=â€metricâ€, values_to=â€valueâ€) %&gt;% ggplot(aes(x=diagnosis, y=value)) + geom_boxplot() + facet_wrap(sex~metric, scales=â€freeâ€)</p>

<p>meta_alpha %&gt;% pivot_longer(c(shannon, invsimpson, sobs, coverage), names_to=â€metricâ€, values_to=â€valueâ€) %&gt;% ggplot(aes(x=diagnosis, y=value)) + geom_boxplot() + facet_wrap(sex~metric, scales=â€freeâ€, nrow=2)</p>

<p>#customize labels for panels
http://ggplot2.tidyverse.org/reference/labeller.html
http://ggplot2.tidyverse.org/reference/as_labeller.html
http://ggplot2.tidyverse.org/reference/labellers.html
capitalize &lt;- function(string) {
  substr(string, 1, 1) &lt;- toupper(substr(string, 1, 1))
  string
}
p2 &lt;- ggplot(msleep, aes(x = sleep_total, y = awake)) + geom_point()
p2 + facet_grid(vore ~ conservation, labeller = labeller(vore = capitalize))</p>

<p>conservation_status &lt;- c(
  cd = â€œConservation Dependentâ€,
  en = â€œEndangeredâ€,
  lc = â€œLeast concernâ€,
  nt = â€œNear Threatenedâ€,
  vu = â€œVulnerableâ€,
  domesticated = â€œDomesticatedâ€
)
p2 + facet_grid(vore ~ conservation, labeller = labeller(
  .default = capitalize,
  conservation = conservation_status
))</p>

<p>#ordination with gray background points and colored top points
ggplot(mpg, aes(displ, hwy)) +
  geom_point(data = transform(mpg, class = NULL), colour = â€œgrey85â€) +
  geom_point() +
  facet_wrap(~class)</p>

<h1 id="gganimate">gganimate</h1>

<h1 id="cowplot">cowplot</h1>
:ET